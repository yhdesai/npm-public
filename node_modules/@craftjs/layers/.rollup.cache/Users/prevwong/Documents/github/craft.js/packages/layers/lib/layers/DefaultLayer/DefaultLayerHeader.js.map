{"version":3,"file":"DefaultLayerHeader.js","sourceRoot":"","sources":["../../../src/layers/DefaultLayer/DefaultLayerHeader.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useEditor } from '@craftjs/core';\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport { EditableLayerName } from './EditableLayerName';\nimport Arrow from './svg/arrow.svg';\nimport Eye from './svg/eye.svg';\nimport Linked from './svg/linked.svg';\n\nimport { useLayer } from '../useLayer';\n\nconst StyledDiv = styled.div<{ depth: number; selected: boolean }>`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 4px 10px;\n  background: ${(props) => (props.selected ? '#2680eb' : 'transparent')};\n  color: ${(props) => (props.selected ? '#fff' : 'inherit')};\n  svg {\n    fill: ${(props) => (props.selected ? '#fff' : '#808184')};\n    margin-top: 2px;\n  }\n  .inner {\n    flex: 1;\n    > div {\n      padding: 0px;\n      flex: 1;\n      display: flex;\n      margin-left: ${(props) => props.depth * 10}px;\n      align-items: center;\n      div.layer-name {\n        flex: 1;\n        h2 {\n          font-size: 15px;\n          line-height: 26px;\n        }\n      }\n    }\n  }\n`;\n\nconst Expand = styled.a<{ expanded: boolean }>`\n  width: 8px;\n  height: 8px;\n  display: block;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  transform: rotate(${(props) => (props.expanded ? 180 : 0)}deg);\n  opacity: 0.7;\n  cursor: pointer;\n  transform-origin: 60% center;\n`;\n\nconst Hide = styled.a<{ selected: boolean; isHidden: boolean }>`\n  width: 14px;\n  height: 14px;\n  margin-right: 10px;\n  position: relative;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  cursor: pointer;\n\n  svg {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n    opacity: ${(props) => (props.isHidden ? 0.2 : 1)};\n  }\n  &:after {\n    content: ' ';\n    width: 2px;\n    height: ${(props) => (props.isHidden ? 100 : 0)}%;\n    position: absolute;\n    left: 2px;\n    top: 3px;\n    background: ${(props) => (props.selected ? '#fff' : '#808184')};\n    transform: rotate(-45deg);\n    transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n    transform-origin: 0% 0%;\n    opacity: ${(props) => (props.isHidden ? 0.4 : 1)};\n  }\n`;\n\nconst TopLevelIndicator = styled.div`\n  margin-left: -22px;\n  margin-right: 10px;\n\n  svg {\n    width: 12px;\n    height: 12px;\n  }\n`;\n\nexport const DefaultLayerHeader: React.FC = () => {\n  const {\n    id,\n    depth,\n    expanded,\n    children,\n    connectors: { drag, layerHeader },\n    actions: { toggleLayer },\n  } = useLayer((layer) => {\n    return {\n      expanded: layer.expanded,\n    };\n  });\n\n  const { hidden, actions, selected, topLevel } = useEditor((state, query) => {\n    // TODO: handle multiple selected elements\n    const selected = query.getEvent('selected').first() === id;\n\n    return {\n      hidden: state.nodes[id] && state.nodes[id].data.hidden,\n      selected,\n      topLevel: query.node(id).isTopLevelCanvas(),\n    };\n  });\n\n  return (\n    <StyledDiv selected={selected} ref={drag} depth={depth}>\n      <Hide\n        selected={selected}\n        isHidden={hidden}\n        onClick={() => actions.setHidden(id, !hidden)}\n      >\n        <Eye />\n      </Hide>\n      <div className=\"inner\">\n        <div ref={layerHeader}>\n          {topLevel ? (\n            <TopLevelIndicator>\n              <Linked />\n            </TopLevelIndicator>\n          ) : null}\n\n          <div className=\"layer-name s\">\n            <EditableLayerName />\n          </div>\n          <div>\n            {children && children.length ? (\n              <Expand expanded={expanded} onMouseDown={() => toggleLayer()}>\n                <Arrow />\n              </Expand>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    </StyledDiv>\n  );\n};\n"]}