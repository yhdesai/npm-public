{"version":3,"file":"movePlaceholder.js","sourceRoot":"","sources":["../../src/events/movePlaceholder.ts"],"names":[],"mappings":"AAEA,MAAM,CAAC,OAAO,UAAU,eAAe,CACrC,GAAe,EACf,aAAsB,EAAE,4BAA4B;AACpD,iBAAiC,EAAE,sDAAsD;AACzF,YAAoB,CAAC;IAErB,IAAI,CAAC,GAAG,CAAC,EACP,CAAC,GAAG,CAAC,EACL,CAAC,GAAG,CAAC,EACL,CAAC,GAAG,CAAC,EACL,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;IAEpB,MAAM,KAAK,GAAG,iBAAiB,CAAC;IAEhC,IAAI,KAAK,EAAE;QACT,6CAA6C;QAC7C,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YACjB,CAAC,GAAG,SAAS,CAAC;YACd,CAAC,GAAG,KAAK,CAAC,WAAW,CAAC;YACtB,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC;YACd,CAAC,GAAG,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,UAAU,CAAC;SACrE;aAAM;YACL,CAAC,GAAG,KAAK,CAAC,UAAU,CAAC;YACrB,CAAC,GAAG,SAAS,CAAC;YACd,CAAC,GAAG,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;YAClD,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC;SAChB;KACF;SAAM;QACL,IAAI,aAAa,EAAE;YACjB,CAAC,GAAG,aAAa,CAAC,GAAG,GAAG,aAAa,CAAC,OAAO,CAAC,GAAG,CAAC;YAClD,CAAC,GAAG,aAAa,CAAC,IAAI,GAAG,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC;YACpD,CAAC;gBACC,aAAa,CAAC,UAAU;oBACxB,aAAa,CAAC,OAAO,CAAC,KAAK;oBAC3B,aAAa,CAAC,OAAO,CAAC,IAAI;oBAC1B,aAAa,CAAC,MAAM,CAAC,IAAI;oBACzB,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC;YAC7B,CAAC,GAAG,SAAS,CAAC;SACf;KACF;IACD,OAAO;QACL,GAAG,EAAE,GAAG,CAAC,IAAI;QACb,IAAI,EAAE,GAAG,CAAC,IAAI;QACd,KAAK,EAAE,GAAG,CAAC,IAAI;QACf,MAAM,EAAE,GAAG,CAAC,IAAI;KACjB,CAAC;AACJ,CAAC","sourcesContent":["import { DropAction, DOMInfo } from '../interfaces';\n\nexport default function movePlaceholder(\n  pos: DropAction,\n  canvasDOMInfo: DOMInfo, // which canvas is cursor at\n  bestTargetDomInfo: DOMInfo | null, // closest element in canvas (null if canvas is empty)\n  thickness: number = 2\n) {\n  let t = 0,\n    l = 0,\n    w = 0,\n    h = 0,\n    where = pos.where;\n\n  const elDim = bestTargetDomInfo;\n\n  if (elDim) {\n    // If it's not in flow (like 'float' element)\n    if (!elDim.inFlow) {\n      w = thickness;\n      h = elDim.outerHeight;\n      t = elDim.top;\n      l = where === 'before' ? elDim.left : elDim.left + elDim.outerWidth;\n    } else {\n      w = elDim.outerWidth;\n      h = thickness;\n      t = where === 'before' ? elDim.top : elDim.bottom;\n      l = elDim.left;\n    }\n  } else {\n    if (canvasDOMInfo) {\n      t = canvasDOMInfo.top + canvasDOMInfo.padding.top;\n      l = canvasDOMInfo.left + canvasDOMInfo.padding.left;\n      w =\n        canvasDOMInfo.outerWidth -\n        canvasDOMInfo.padding.right -\n        canvasDOMInfo.padding.left -\n        canvasDOMInfo.margin.left -\n        canvasDOMInfo.margin.right;\n      h = thickness;\n    }\n  }\n  return {\n    top: `${t}px`,\n    left: `${l}px`,\n    width: `${w}px`,\n    height: `${h}px`,\n  };\n}\n"]}